{% extends 'base.html' %}

{% block title %}Admin Login - KMRL Document Intelligence System{% endblock %}

{% block extra_css %}
<style>
    .admin-login-container {
        background: linear-gradient(135deg, rgba(255, 255, 255, 0.9), rgba(248, 250, 252, 0.95));
        backdrop-filter: blur(10px);
        border: 1px solid rgba(20, 185, 193, 0.1);
    }
    
    .form-input {
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .form-input:focus {
        border-color: var(--kmrl-primary);
        box-shadow: 0 0 0 3px rgba(20, 185, 193, 0.1);
        transform: translateY(-1px);
    }
    
    .admin-login-btn {
        background: linear-gradient(135deg, #14B9C1, #0FA5AC) !important;
        color: white !important;
        transition: all 0.3s ease;
    }
    
    .admin-login-btn:hover {
        background: linear-gradient(135deg, #0FA5AC, #0D9299) !important;
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(20, 185, 193, 0.3);
    }
    
    .floating-shape {
        position: absolute;
        border-radius: 50%;
        opacity: 0.1;
        animation: float 6s ease-in-out infinite;
    }
    
    .floating-shape:nth-child(1) { animation-delay: 0s; }
    .floating-shape:nth-child(2) { animation-delay: 2s; }
    .floating-shape:nth-child(3) { animation-delay: 4s; }
    
    @keyframes float {
        0%, 100% { transform: translateY(0px) rotate(0deg); }
        50% { transform: translateY(-20px) rotate(5deg); }
    }
</style>
{% endblock %}

{% block content %}
<div class="min-h-screen bg-gradient-to-br from-kmrl-light via-white to-blue-50 relative overflow-hidden">
    <!-- Floating Background Elements -->
    <div class="floating-shape w-64 h-64 bg-kmrl-primary top-10 -right-20"></div>
    <div class="floating-shape w-48 h-48 bg-purple-500 bottom-20 -left-16"></div>
    <div class="floating-shape w-32 h-32 bg-kerala-gold top-1/2 left-10"></div>
    
    <!-- Admin Pattern Background -->
    <div class="absolute inset-0 bg-[url('data:image/svg+xml,%3Csvg width="60" height="60" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg"%3E%3Cg fill="none" fill-rule="evenodd"%3E%3Cg fill="%2314B9C1" fill-opacity="0.03"%3E%3Crect x="10" y="10" width="8" height="12" rx="1"/%3E%3Crect x="20" y="15" width="6" height="8" rx="1"/%3E%3Crect x="35" y="12" width="10" height="14" rx="1"/%3E%3C/g%3E%3C/g%3E%3C/svg%3E')] opacity-40"></div>
    
    <div class="relative flex items-center justify-center min-h-screen px-4 py-12">
        <div class="w-full max-w-md">
            <!-- Admin Login Card -->
            <div class="admin-login-container rounded-3xl p-8 shadow-2xl">
                <!-- Header Section -->
                <div class="text-center mb-8">
                    <div class="inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-red-500 to-red-600 rounded-2xl shadow-lg mb-6 group hover:scale-105 transition-transform duration-300">
                        <i class="fas fa-user-shield text-white text-3xl group-hover:scale-110 transition-transform duration-300"></i>
                    </div>
                    
                    <h1 class="text-3xl font-poppins font-bold text-kmrl-secondary mb-2">
                        Admin Access
                    </h1>
                    <p class="text-kmrl-gray">
                        KMRL Document Intelligence System
                    </p>
                </div>

                <!-- Error Messages -->
                {% if messages %}
                    {% for message in messages %}
                        <div class="mb-6 p-4 bg-red-50 border border-red-200 rounded-xl">
                            <div class="flex items-center">
                                <i class="fas fa-exclamation-triangle text-red-500 mr-3"></i>
                                <span class="text-red-800 font-medium">{{ message }}</span>
                            </div>
                        </div>
                    {% endfor %}
                {% endif %}

                <!-- Admin Login Form -->
                <form method="POST" class="space-y-6">
                    {% csrf_token %}
                    
                    <!-- Username -->
                    <div class="space-y-2">
                        <label class="block text-sm font-semibold text-kmrl-secondary">
                            <i class="fas fa-user-tie text-red-500 mr-2"></i>
                            Administrator Username
                        </label>
                        <div class="relative">
                            <input type="text" name="username" required
                                   placeholder="Enter admin username"
                                   class="form-input w-full pl-12 pr-4 py-4 border-2 border-gray-200 rounded-xl bg-white focus:outline-none text-kmrl-secondary font-medium">
                            <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                                <i class="fas fa-id-badge text-red-500"></i>
                            </div>
                        </div>
                    </div>

                    <!-- Password -->
                    <div class="space-y-2">
                        <label class="block text-sm font-semibold text-kmrl-secondary">
                            <i class="fas fa-lock text-red-500 mr-2"></i>
                            Administrator Password
                        </label>
                        <div class="relative">
                            <input type="password" name="password" required
                                   placeholder="Enter admin password"
                                   class="form-input w-full pl-12 pr-12 py-4 border-2 border-gray-200 rounded-xl bg-white focus:outline-none text-kmrl-secondary font-medium">
                            <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                                <i class="fas fa-key text-red-500"></i>
                            </div>
                            <button type="button" onclick="toggleAdminPassword()" class="absolute inset-y-0 right-0 pr-4 flex items-center">
                                <i id="adminPasswordToggle" class="fas fa-eye text-gray-400 hover:text-red-500 transition-colors duration-300"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Security Warning -->
                    <div class="bg-amber-50 border border-amber-200 rounded-xl p-4">
                        <div class="flex items-start space-x-3">
                            <div class="w-6 h-6 bg-amber-100 rounded-full flex items-center justify-center mt-0.5">
                                <i class="fas fa-exclamation-triangle text-amber-600 text-xs"></i>
                            </div>
                            <div>
                                <p class="text-amber-800 font-medium text-sm mb-1">Administrative Access</p>
                                <p class="text-amber-700 text-xs leading-relaxed">
                                    This portal provides full system access. All administrative activities are logged and monitored for security compliance.
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- Login Button -->
                    <button type="submit"
                            class="admin-login-btn w-full py-4 font-bold text-lg rounded-xl focus:outline-none focus:ring-4 focus:ring-red-500/25 group">
                        <span class="flex items-center justify-center">
                            <i class="fas fa-sign-in-alt mr-3 group-hover:translate-x-1 transition-transform duration-300"></i>
                            Access Admin Portal
                        </span>
                    </button>
                </form>
            </div>

            <!-- Back to User Login -->
            <div class="text-center mt-6">
                <a href="{% url 'user_login' %}" class="inline-flex items-center text-kmrl-primary hover:text-kmrl-primary-dark font-medium transition-colors duration-300">
                    <i class="fas fa-arrow-left mr-2"></i>
                    Back to User Login
                </a>
            </div>
        </div>
    </div>

    <!-- Background Animation -->
    <div class="absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-red-500 via-kmrl-primary to-red-500 animate-pulse"></div>
</div>

<!-- JavaScript for Interactive Features -->
<script>
    function toggleAdminPassword() {
        const passwordInput = document.querySelector('input[name="password"]');
        const toggleIcon = document.getElementById('adminPasswordToggle');
        
        if (passwordInput.type === 'password') {
            passwordInput.type = 'text';
            toggleIcon.classList.remove('fa-eye');
            toggleIcon.classList.add('fa-eye-slash');
        } else {
            passwordInput.type = 'password';
            toggleIcon.classList.remove('fa-eye-slash');
            toggleIcon.classList.add('fa-eye');
        }
    }

    // Auto-focus on page load
    document.addEventListener('DOMContentLoaded', function() {
        const usernameInput = document.querySelector('input[name="username"]');
        usernameInput.focus();
    });

    // Form validation feedback
    document.querySelector('form').addEventListener('submit', function(e) {
        const button = document.querySelector('button[type="submit"]');
        const originalContent = button.innerHTML;
        
        button.innerHTML = '<i class="fas fa-spinner fa-spin mr-3"></i>Authenticating...';
        button.disabled = true;
        
        // Re-enable button after 5 seconds if form submission fails
        setTimeout(() => {
            if (button.disabled) {
                button.innerHTML = originalContent;
                button.disabled = false;
            }
        }, 5000);
    });
</script>
{% endblock %}
